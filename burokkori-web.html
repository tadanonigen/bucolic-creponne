<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ログイン</title>
    <link rel="stylesheet" href="style.css">
</head>

<header>
    <center>
        <h1>パスワードを当ててみろ！</h1>
        <h2>鉄壁のWebサイト</h2>
    </center>
</header>
<style>
    header {
        position: fixed;
        color: white;
        width: 100%;
        height: 140px;
        background-color: #8dc21f;
    }
</style>

<br>
<br>
<br>

<body>
    <div>
        <!--フォーム-->
        <form name="login_form">
            <center>
                <h1 class="contact-title">ログイン</h1>
                <p>ID, Passwordご入力の上, 「認証」ボタンをクリックしてください.</p>
            </center>

            <center>
                <div>
                    <input type="id" name="id" placeholder="ID">
                </div>
                <br>
                <div>
                    <input type="password" name="pass" placeholder="Password" onchange="nextPage()">
                </div>
            </center>

            <button type="button" onClick="nextPage();">認証</button>
            <h3 id="error"></div>
            <h1 id="count"></h1>
        </form>

        <!--ログイン処理-->
        <script language="JavaScript" type="text/javascript">
            function nextPage() {
                id = document.login_form.id.value
                pwd = document.login_form.pass.value;
                if(id == "admin"){
                    if(pwd == "4019"){
                        location.href = "success.html";
                    }
                    else{
                        var err = document.getElementById("error");
                        err.innerHTML = "Incorrect password"
                    }
                }
            }
            const cookies = document.cookie; // クッキーを全部取得
            const cookiesArray = cookies.split('; '); // 'キー=値'の形で分割して配列に入れる

            for (const cookie of cookiesArray) {
            const cookieArray = cookie.split('='); // キーと値をさらに分割して配列に入れる

            // 初回アクセスなら（countというクッキーがないなら）
            if (cookieArray[0] !== 'count') {
                document.cookie = 'count=1; path=/';
                console.log('1回目のアクセスです');
            }

            // 2回目以降のアクセスなら
            if (cookieArray[0] === 'count') {
                let accessCount = parseInt(cookieArray[1]); // countの値を整数値へ変換
                accessCount++;
                document.cookie = 'count=' + accessCount + '; path=/';
                console.log(accessCount + '回目のアクセスです');
                document.getElementById("count").innerHTML = accessCount;
            }
            }
        </script>

    </div>
</body>

</html>
